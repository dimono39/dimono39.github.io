<h2>üìù –¢–∞–∫—Å–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∑–∞–¥–∞–Ω–∏–π</h2>

<div id="tasksContainer">
    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ render.js -->
</div>

<div class="task-templates" style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
    <h4>üöÄ –ë—ã—Å—Ç—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã –∑–∞–¥–∞–Ω–∏–π</h4>
    <p style="margin-bottom: 15px; color: #666;">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π:</p>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
        <button class="btn" onclick="generateTemplate('standard')" style="text-align: left;">
            <div style="font-weight: bold;">üìä –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è</div>
            <small>8 –∑–∞–¥–∞–Ω–∏–π, 4 —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</small>
        </button>
        
        <button class="btn" onclick="generateTemplate('vpr')" style="text-align: left;">
            <div style="font-weight: bold;">üìù –í–ü–†</div>
            <small>12 –∑–∞–¥–∞–Ω–∏–π, –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ –í–ü–†</small>
        </button>
        
        <button class="btn" onclick="generateTemplate('oge')" style="text-align: left;">
            <div style="font-weight: bold;">üéØ –û–ì–≠</div>
            <small>15 –∑–∞–¥–∞–Ω–∏–π, –ö–≠–° –∏ –ü–£</small>
        </button>
        
        <button class="btn" onclick="generateTemplate('ege')" style="text-align: left;">
            <div style="font-weight: bold;">‚≠ê –ï–ì–≠</div>
            <small>19 –∑–∞–¥–∞–Ω–∏–π, –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å</small>
        </button>
        
        <button class="btn" onclick="generateTemplate('literacy')" style="text-align: left;">
            <div style="font-weight: bold;">üåê –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å</div>
            <small>8 –∑–∞–¥–∞–Ω–∏–π, 6 –≤–∏–¥–æ–≤ –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏</small>
        </button>
        
        <button class="btn" onclick="generateTemplate('psychology')" style="text-align: left;">
            <div style="font-weight: bold;">üß† –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</div>
            <small>10 –∑–∞–¥–∞–Ω–∏–π, 4 –∏–∑–º–µ—Ä–µ–Ω–∏—è EI</small>
        </button>
    </div>
</div>

<div class="task-statistics" style="margin-top: 20px;">
    <h4>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–¥–∞–Ω–∏–π</h4>
    <div id="taskStats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 15px 0;">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
</div>

<script>
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞ –∑–∞–¥–∞–Ω–∏–π
    function generateTemplate(templateType) {
        if (app.data.tasks.length > 0 && !confirm('–¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞–Ω–∏—è –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
            return;
        }
        
        app.data.tasks = [];
        app.data.results = [];
        
        let tasks = [];
        
        switch(templateType) {
            case 'standard':
                tasks = [
                    { type: "–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å", maxScore: 2, level: 1, knowledge: "–ó–Ω–∞–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π", number: 1 },
                    { type: "–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä", maxScore: 1, level: 1, knowledge: "–ë–∞–∑–æ–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è", number: 2 },
                    { type: "–ó–∞–¥–∞—á–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª–æ", maxScore: 3, level: 2, knowledge: "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞", number: 3 },
                    { type: "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–Ω—è—Ç–∏–π", maxScore: 2, level: 2, knowledge: "–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑", number: 4 },
                    { type: "–†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≤–æ–π –∑–∞–¥–∞—á–∏", maxScore: 4, level: 2, knowledge: "–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á", number: 5 },
                    { type: "–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞", maxScore: 3, level: 3, knowledge: "–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ", number: 6 },
                    { type: "–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ", maxScore: 3, level: 3, knowledge: "–õ–æ–≥–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ", number: 7 },
                    { type: "–¢–≤–æ—Ä—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ", maxScore: 5, level: 4, knowledge: "–¢–≤–æ—Ä—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ", number: 8 }
                ];
                break;
                
            case 'vpr':
                tasks = [
                    { type: "–ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è", maxScore: 1, level: 1, knowledge: "–í—ã—á–∏—Å–ª–µ–Ω–∏—è", competence: "calculations", vprLevel: 1, number: 1 },
                    { type: "–ß—Ç–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞", maxScore: 1, level: 1, knowledge: "–ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞", competence: "text_work", vprLevel: 1, number: 2 },
                    { type: "–†–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π", maxScore: 2, level: 2, knowledge: "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö", competence: "data_work", vprLevel: 2, number: 3 },
                    { type: "–†–µ—à–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–π –∑–∞–¥–∞—á–∏", maxScore: 2, level: 2, knowledge: "–õ–æ–≥–∏–∫–∞", competence: "logic", vprLevel: 2, number: 4 },
                    { type: "–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞", maxScore: 2, level: 2, knowledge: "–ì—Ä–∞—Ñ–∏–∫–∏", competence: "graphics", vprLevel: 2, number: 5 },
                    { type: "–ê–Ω–∞–ª–∏–∑ –¥–∏–∞–≥—Ä–∞–º–º—ã", maxScore: 2, level: 2, knowledge: "–î–∏–∞–≥—Ä–∞–º–º—ã", competence: "data_work", vprLevel: 2, number: 6 }
                ];
                break;
                
            case 'psychology':
                tasks = [
                    { type: "–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —ç–º–æ—Ü–∏–π", maxScore: 10, level: 1, knowledge: "–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ —ç–º–æ—Ü–∏–π", dimension: "perception", subscale: "–õ–∏—Ü–µ–≤—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è", number: 1 },
                    { type: "–≠–º–æ—Ü–∏–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ", maxScore: 8, level: 2, knowledge: "–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ —ç–º–æ—Ü–∏–π", dimension: "perception", subscale: "–ö–æ–Ω—Ç–µ–∫—Å—Ç", number: 2 },
                    { type: "–≠–º–æ—Ü–∏–∏ –∏ —Ä–µ—à–µ–Ω–∏—è", maxScore: 12, level: 3, knowledge: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç–º–æ—Ü–∏–π", dimension: "use", subscale: "–ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π", number: 3 },
                    { type: "–°–ª–æ–∂–Ω—ã–µ —ç–º–æ—Ü–∏–∏", maxScore: 15, level: 3, knowledge: "–ü–æ–Ω–∏–º–∞–Ω–∏–µ —ç–º–æ—Ü–∏–π", dimension: "understanding", subscale: "–î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è", number: 4 },
                    { type: "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã", maxScore: 10, level: 4, knowledge: "–ü–æ–Ω–∏–º–∞–Ω–∏–µ —ç–º–æ—Ü–∏–π", dimension: "understanding", subscale: "–î–∏–Ω–∞–º–∏–∫–∞", number: 5 },
                    { type: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–Ω–µ–≤–æ–º", maxScore: 12, level: 2, knowledge: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏—è–º–∏", dimension: "management", subscale: "–†–µ–≥—É–ª—è—Ü–∏—è", number: 6 },
                    { type: "–≠–º–ø–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç", maxScore: 17, level: 4, knowledge: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏—è–º–∏", dimension: "management", subscale: "–≠–º–ø–∞—Ç–∏—è", number: 7 }
                ];
                break;
        }
        
        app.data.tasks = tasks;
        
        // –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
        app.data.students.forEach((student, index) => {
            app.data.results[index] = new Array(tasks.length).fill(0);
        });
        
        app.saveData();
        app.renderAll();
        app.showNotification(`–®–∞–±–ª–æ–Ω "${templateType}" –∑–∞–≥—Ä—É–∂–µ–Ω!`, 'success');
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞–¥–∞–Ω–∏–π
    function updateTaskStatistics() {
        const container = document.getElementById('taskStats');
        if (!container) return;
        
        const totalTasks = app.data.tasks.length;
        const totalPoints = app.data.tasks.reduce((sum, task) => sum + (task.maxScore || 0), 0);
        
        // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        const levelCounts = {1: 0, 2: 0, 3: 0, 4: 0};
        app.data.tasks.forEach(task => {
            const level = task.level || 1;
            levelCounts[level] = (levelCounts[level] || 0) + 1;
        });
        
        container.innerHTML = `
            <div class="kpi-card">
                <div class="kpi-value">${totalTasks}</div>
                <div class="kpi-label">–í—Å–µ–≥–æ –∑–∞–¥–∞–Ω–∏–π</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">${totalPoints}</div>
                <div class="kpi-label">–í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">${levelCounts[1]}</div>
                <div class="kpi-label">–£—Ä–æ–≤–µ–Ω—å 1</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">${levelCounts[2]}</div>
                <div class="kpi-label">–£—Ä–æ–≤–µ–Ω—å 2</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">${levelCounts[3]}</div>
                <div class="kpi-label">–£—Ä–æ–≤–µ–Ω—å 3</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">${levelCounts[4]}</div>
                <div class="kpi-label">–£—Ä–æ–≤–µ–Ω—å 4</div>
            </div>
        `;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏–π
    document.addEventListener('DOMContentLoaded', updateTaskStatistics);
    setInterval(updateTaskStatistics, 5000);
</script>